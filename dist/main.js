(()=>{"use strict";const e=e=>{const t=document.getElementById(e),n=document.querySelectorAll("button[type=submit]"),o=e[4]-1;n.forEach((e=>e.setAttribute("disabled","disabled"))),document.querySelectorAll("input").forEach((e=>e.addEventListener("input",(()=>{let e=0;for(let n of new FormData(t).entries())""===n[1]&&(e+=1);e?n[o].setAttribute("disabled","disabled"):n[o].removeAttribute("disabled")}))));const a=document.createElement("div");a.style.cssText="font-size: 2rem;",t.appendChild(a),t.addEventListener("submit",(e=>{e.preventDefault(),t.appendChild(a),a.textContent="Загрузка...";const n=new FormData(t);let o={};n.forEach(((e,t)=>{o[t]=e})),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>{if(200!==e.status)throw new Error(`Что-то пошло не так, код ошибки - ${e.status}`);a.textContent="Спасибо! Мы скоро с вами свяжемся!",c()})).catch((e=>{console.log(e),a.textContent="Что-то пошло не так...",c()}))}));const c=()=>{r(t),a.style.cssText="",n[o].setAttribute("disabled","disabled"),setTimeout((()=>{a.textContent=""}),3e3),"form3"===e&&setTimeout((()=>{document.querySelector(".popup").style.display="none"}),2e3)},r=e=>{e.querySelectorAll("input").forEach((e=>e.value=""))}};(function(e){let t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function a(e){return e<10?"0"+e:e}!function e(){let c=(()=>{const e=(new Date("27 feb 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t}})();t.textContent=a(c.hours),n.textContent=a(c.minutes),o.textContent=a(c.seconds),c.timeRemaining>0?setInterval(e,1e3):(clearInterval(2),t.textContent="00",n.textContent="00",o.textContent="00")}()})(),(()=>{const e=document.querySelector("menu"),t=()=>e.classList.toggle("active-menu");function n(e,t){const n=e.offsetTop;let o,a=0;o=requestAnimationFrame((function e(){var c;o=requestAnimationFrame(e),c=t,a>.95*n&&1!==c?c/=2:n>4e3?c+=3:n>3e3&&(c+=2),a+=20*c,document.documentElement.scrollTop=a,a>n&&(document.documentElement.scrollTop=n,cancelAnimationFrame(o))}))}document.addEventListener("click",(o=>{let a=o.target;if(a.closest("main")&&!e.classList.contains("active-menu"))a.closest(".menu")?t():a.closest('a[href="#service-block"]')&&(o.preventDefault(),n(document.getElementById("service-block"),2));else if(e.classList.contains("active-menu"))if(null===a.closest("menu")||a.classList.contains("close-btn"))t();else if("A"===a.tagName&&!a.classList.contains(".close-btn")){o.preventDefault(),t();const e=a.getAttribute("href").substring(1);n(document.getElementById(e),3)}}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=(document.querySelector(".popup-close"),e.querySelector(".popup-content")),o=n.getBoundingClientRect().x;let a=document.documentElement.clientWidth;window.addEventListener("resize",(function(){a=document.documentElement.clientWidth})),t.forEach((t=>t.addEventListener("click",(()=>{e.style.display="block",a>768&&function(){let e,t=-1200;n.style.transform=`translate(${t}px)`;const a=()=>{e=requestAnimationFrame(a),t+=50,t>=o-50&&cancelAnimationFrame(e),n.style.transform=`translate(${t}px)`};a()}()})))),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"),n||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,a)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(a)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),n=document.querySelector(".portfolio-content");let o,a=0;e.forEach((e=>{let n=document.createElement("li");n.classList.add("dot"),0===e&&n.classList.add("dot-active"),t.appendChild(n)}));const c=document.querySelectorAll(".dot"),r=(e,t,n)=>{e[t].classList.remove(n)},l=(e,t,n)=>{e[t].classList.add(n)},s=()=>{r(e,a,"portfolio-item-active"),r(c,a,"dot-active"),a++,a>=e.length&&(a=0),l(e,a,"portfolio-item-active"),l(c,a,"dot-active")},i=(e=3e3)=>{o=setInterval(s,e)};n.addEventListener("click",(t=>{t.preventDefault();let n=t.target;n.matches(".portfolio-btn, .dot")&&(r(e,a,"portfolio-item-active"),r(c,a,"dot-active"),n.matches("#arrow-right")?a++:n.matches("#arrow-left")?a--:n.matches(".dot")&&c.forEach(((e,t)=>{e===n&&(a=t)})),a>=e.length&&(a=0),a<0&&(a=e.length-1),l(e,a,"portfolio-item-active"),l(c,a,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),document.querySelectorAll("#command .command__photo").forEach((e=>{const t=e.getAttribute("src"),n=e.dataset.img;e.addEventListener("mouseenter",(e=>e.target.src=n)),e.addEventListener("mouseleave",(e=>e.target.src=t))})),(()=>{let e=!1;const t=n=>{n.target.value=n.target.value.replace(/-+(?=-+)| +(?= +)|-+(?= +)| +(?=-+)|^ +| +$|^-+|-+$/gi,""),"user_name"===n.target.name&&(n.target.value=n.target.value.split(" ").map((e=>e[0].toUpperCase()+e.slice(1).toLowerCase())).join(" ")),n.target.removeEventListener("blur",t),e=!e},n=n=>{e||(n.target.addEventListener("blur",t),e=!e)};document.addEventListener("input",(e=>{e.target.matches("input.calc-item")?(e=>{e.target.value=e.target.value.replace(/\D/gi,""),n(e)})(e):"email"===e.target.type?(e=>{e.target.value=e.target.value.replace(/[^a-z@_.!~*'-]/gi,""),n(e)})(e):"tel"===e.target.type?(e=>{e.target.value=e.target.value.replace(/[^\d-()+]/gi,"")})(e):e.target.matches(".mess")?(e=>{e.target.value=e.target.value.replace(/[^а-я- ,.!?'()0-9]/gi,""),n(e)})(e):("text"===e.target.type||e.target.matches("input"))&&(e=>{e.target.value=e.target.value.replace(/[^а-я- ]|-(?=-)| (?= )/gi,""),n(e)})(e)}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),r=document.getElementById("total");t.addEventListener("change",(t=>{const l=t.target;(l.matches("select")||l.matches("input"))&&(()=>{let t=0,l=1,s=1;const i=n.options[n.selectedIndex].value,u=+o.value;c.value>1&&(l+=(c.value-1)/10),a.value&&a.value<5?s*=2:a.value&&a.value<10&&(s*=1.5),i&&u&&(t=e*i*u*l*s);let d=1;const m=()=>{const e=requestAnimationFrame(m);d*=2,r.textContent=d,d>=t&&(r.textContent=t,cancelAnimationFrame(e))};requestAnimationFrame(m),r.textContent=t})()}))})(100),e("form1"),e("form2"),e("form3")})();